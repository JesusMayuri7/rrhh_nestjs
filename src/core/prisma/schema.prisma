// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model CodigoAir {
  id          Int    @id @default(autoincrement())
  modalidadId Int
  anio        String
  codigo      String
  descCodigo  String
  codigoAirExtId CodigoAirExt?
  codigoAirDetalles      CodigoAirDetalle[]
   @@map("codigo_air")
}

model CodigoAirExt {
  id                    Int                @id @default(autoincrement())
  baseCalculoCts        Boolean            @default(false)
  baseCalculoBeneficios Boolean            @default(false)
  afecto                Boolean            @default(false)
  isActivo              Boolean            @default(false)
  codigoAirId           Int                @unique
  modalidadEntregaId    Int
  frecuenciaEntregaId   Int
  frecuenciaMesId       Int
  modalidaEntrega       ModalidadEntrega   @relation(fields: [modalidadEntregaId], references: [id])
  frecuenciaMes         FrecuenciaMes      @relation(fields: [frecuenciaMesId], references: [id])
  frecuenciaEntrega     FrecuenciaEntrega  @relation(fields: [frecuenciaEntregaId], references: [id])
  codigoAir             CodigoAir          @relation(fields: [codigoAirId], references: [id])

   @@map("codigo_air_ext")

}

model CodigoAirDetalle {
  id             Int          @id @default(autoincrement())
  codigoAirId Int
  valorCodigo    Float
  codigoPlaza    String
  descFuente     String
  codigoAir     CodigoAir @relation(fields: [codigoAirId], references: [id])

  @@map("codigo_air_detalle")
}

model DatoLaboralAir {
  id                    Int                     @id @default(autoincrement())
  modalidadId           Int
  descDatoLaboral       String
  datoLaboralAirDetalles DatoLaboralAirDetalle[]

     @@map("dato_laboral_air")
}

model Ejemplo {
  id                    Int                     @id @default(autoincrement())
  ejem           Json?
  @@map("ejemplo")
}

model DatoLaboralAirDetalle {
  id               Int            @id @default(autoincrement())
  datoLaboralAirId Int
  valor            String
  codigoPlaza      String
  datoLaboralAir   DatoLaboralAir @relation(fields: [datoLaboralAirId], references: [id])
  @@map("dato_laboral_air_detalle")
}

model DatoLaboralAirExt {
  id               Int            @id @default(autoincrement())
  modalidadId      Int  
  codigoPlaza      String
  datoLaboral      Json?
  codigosAir      Json?
  @@map("dato_laboral_air_ext")
}

model ModalidadEntrega {
  id                   Int            @id @default(autoincrement())
  descModalidadEntrega String
  codigoAirExts         CodigoAirExt[]

  @@map("modalidad_entrega")
}

model FrecuenciaEntrega {
  id                    Int            @id @default(autoincrement())
  descFrecuenciaEntrega String
  codigoAirExts         CodigoAirExt[]

@@map("frecuencia_entrega")
}

model FrecuenciaMes {
  id                Int            @id @default(autoincrement())
  descFrecuenciaMes String
  codigoAirExts      CodigoAirExt[]

@@map("frecuencia_mes")

}
