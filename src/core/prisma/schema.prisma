// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model AirhspCodigo {
  id          Int    @id @default(autoincrement())
  modalidadContratoId Int
  modalidaContrato      ModalidadContrato   @relation(fields: [modalidadContratoId], references: [id])
  anio        String
  codigo      String
  descCodigo  String
  configAirhspCodigo ConfigAirhspCodigo?
   @@map("airhsp_codigo")
}

model AirhspFile {
  id         Int    @id @default(autoincrement())  
  fileUrl     String
  modalidadContratoId Int
  modalidaContrato      ModalidadContrato   @relation(fields: [modalidadContratoId], references: [id])
  airhspData  AirhspData[]
  createdAt     DateTime  @default(now())
  @@map("airhsp_file")
}

model ConfigAirhspCodigo {
  id                    Int                @id @default(autoincrement())
  baseCalculoCts        Boolean            @default(false)
  baseCalculoBeneficios Boolean            @default(false)
  afecto                Boolean            @default(false)
  isActivo              Boolean            @default(false)
  airhspCodigoId        Int                @unique
  modalidadEntregaId    Int 
  modalidadContratoId    Int 
  frecuenciaEntregaId   Int
  frecuenciaMesId       Int
  modalidaEntrega       ModalidadEntrega   @relation(fields: [modalidadEntregaId], references: [id])
  modalidaContrato      ModalidadContrato   @relation(fields: [modalidadContratoId], references: [id])
  frecuenciaMes         FrecuenciaMes      @relation(fields: [frecuenciaMesId], references: [id])
  frecuenciaEntrega     FrecuenciaEntrega  @relation(fields: [frecuenciaEntregaId], references: [id])
  airhspCodigo          AirhspCodigo       @relation(fields: [airhspCodigoId],references: [id])

   @@map("config_airhsp_codigo")

}

model ConfigAirhspData {
  id                    Int                     @id @default(autoincrement())
  modalidadContratoId           Int
  modalidaContrato      ModalidadContrato   @relation(fields: [modalidadContratoId], references: [id])
  descDatoLaboral       String

  @@map("config_airhsp_data")
}

model AirhspData {
  id               Int            @id @default(autoincrement())
  modalidadContratoId      Int 
  airhspFileId  Int
  modalidaContrato      ModalidadContrato   @relation(fields: [modalidadContratoId], references: [id]) 
  airhspFile      AirhspFile   @relation(fields: [airhspFileId], references: [id]) 
  codigoPlaza      String
  datoLaboral      Json
  codigosAir       Json
  @@map("airhsp_data")
}

model ModalidadEntrega {
  id                   Int            @id @default(autoincrement())
  modalidadId      Int  
  descModalidadEntrega String
  configAirhspCodigo ConfigAirhspCodigo[]
  @@map("modalidad_entrega")
}

model ModalidadContrato {
  id                   Int            @id @default(autoincrement())
  descModalidadContrato String
  descTipoPersona       String
  descTipoPersonaId     Int
  configAirhspCodigo ConfigAirhspCodigo[]
  configAirhspData ConfigAirhspData[]
  airhspCodigo AirhspCodigo[]
  airhspData AirhspData[]
  airhspFIle AirhspFile[]
  @@map("modalidad_contrato")
}

model FrecuenciaEntrega {
  id                    Int            @id @default(autoincrement())
  modalidadContratoId      Int 
  descFrecuenciaEntrega String
  configAirhspCodigo ConfigAirhspCodigo[]
  @@map("frecuencia_entrega")
}

model FrecuenciaMes {
  id                Int            @id @default(autoincrement())
  modalidadContratoId      Int  
  descFrecuenciaMes String
  configAirhspCodigo ConfigAirhspCodigo[]
  @@map("frecuencia_mes")
}
